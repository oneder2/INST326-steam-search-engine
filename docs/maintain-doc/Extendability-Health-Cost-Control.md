# **可扩展性、健康检查与成本控制报告**

文件名称： Steam Game Search Engine \- 可扩展性与运营报告 V1.0  
创建人：

创建日期： 2025/10/04  
适用范围： 运维与高层决策

## **1\. 每日/每周系统健康检查 SOP**

**目的：** 从“被动”告警转向“主动”巡检，确保系统健康。

### **1.1 每日检查清单**

| 检查项 | 目标状态 | 负责人 | 检查结果 |
| :---- | :---- | :---- | :---- |
| 搜索 API 错误率 | \< 1% | 运维/DevOps |  |
| 关键日志（ERROR/FATAL）数量 | 0 | 运维/DevOps |  |
| 数据库文件大小 (games\_data.db) | 正常范围 | 运维/DevOps |  |
| **数据备份验证** | 昨晚备份成功且可恢复。 | 运维/数据团队 |  |
| SSL 证书有效期检查 | 有效期 \> 30 天 | 运维/DevOps |  |

### **1.2 每周检查清单**

* **性能回归：** 在 Staging 环境运行负载测试，确保 P95 延迟仍在 1000ms 以下。  
* **资源使用情况：** 检查 Render 平台的 CPU/内存使用率峰值，确保有足够的缓冲空间。  
* **安全审计：** 运行代码扫描工具，检查新引入的漏洞。

## **2\. 成本控制与预算追踪**

### **2.1 预算目标与成本优化**

* **月度预算目标：**  
* **成本优化项：** \* 识别 Render 平台中未充分利用或闲置的服务，并关闭。  
  * 评估是否可将部分静态内容（如 Faiss 索引）转移到更低成本的存储服务。

### **2.2 月度运营成本报告模板**

| 成本项目 | 上月预算 | 实际支出 | 差异 (%) | 异常说明 | 负责人 |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **FastAPI 服务** |  |  |  |  | DevOps |
| **Next.js 服务** |  |  |  |  | DevOps |
| **外部 API 费用** |  |  |  |  | 业务/产品 |
| **总计** |  |  |  | **重点：** 差异超过 10% 必须说明原因。 | 项目经理 |

## **3\. 系统可扩展性规划**

### **3.1 负载模型与增长预期**

* **当前负载：** 持续支持 10 个并发用户 (P95 \< 1000ms)。  
* **增长目标 (未来 12 个月)：** 支持 50 个并发用户 (目标 P95 \< 1500ms)。

### **3.2 关键组件扩展设计 (50 并发目标)**

| 组件 | 限制/瓶颈 | 扩展策略（预案） |
| :---- | :---- | :---- |
| **FastAPI 后端** | Python GIL 限制，单核性能瓶颈。 | **水平扩展：** 增加 Render 实例数量，通过 Render 自带负载均衡分发流量。 |
| **SQLite 数据库** | 文件锁限制，高并发写入冲突。 | **读写分离：** 架构升级到 **PostgreSQL**，利用其连接池和事务管理能力。 |
| **Faiss 索引** | 索引加载速度慢，内存占用大。 | **优化索引：** 使用压缩 Faiss 索引或部署到专用的高性能实例。 |

## **4\. 业务连续性规划 (BCP)**

### **4.1 灾难恢复预案 (DR)**

* **RTO (恢复时间目标)：** 核心搜索功能在灾难性故障后，**3 小时内**恢复基础可用性。  
* **数据备份演练：** 每季度执行一次**完整备份恢复演练**，验证数据和 Faiss 索引的完整性。

### **4.2 业务降级与沟通**

* **降级开关：** 后端必须预留一个 API 开关，用于**一键禁用**高资源消耗功能（例如：语义搜索），以确保关键词搜索的可用性。  
* **用户沟通模板：** 预先准备好以下公告措辞：  
  * **P0 故障：** “紧急通知：系统正在进行紧急维护，预计恢复时间  
    。给您带来的不便深表歉意。”  
  * **P1 故障：** **“功能降级通知：部分高级搜索功能暂时不可用，基础关键词搜索正常。我们正在紧急处理中。”**