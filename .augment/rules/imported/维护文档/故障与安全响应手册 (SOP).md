---
type: "always_apply"
---

# **故障与安全响应手册 (SOP)**

文件名称： Steam Game Search Engine \- 故障与安全响应 SOP V1.0  
创建人：

创建日期： 2025/10/04  
适用范围： 演示环境和未来生产环境

## **1\. 故障/事件分级与响应时间目标 (RTO/RPO)**

| 级别 | 描述 | 影响 | 响应目标 (RTO) | 恢复点目标 (RPO) |
| :---- | :---- | :---- | :---- | :---- |
| **P0 (灾难级)** | 系统核心功能完全不可用（例如：搜索 API 持续 10 分钟 100% 失败）。 | 收入损失，品牌声誉受损。 | 15 分钟内恢复服务。 | 数据丢失不超过 1 小时。 |
| **P1 (严重)** | 部分核心功能受损（例如：语义搜索失败，但关键词搜索正常；数据更新失败）。 | 影响部分用户体验。 | 1 小时内临时修复。 | 数据丢失不超过 1 天。 |
| **P2 (一般)** | 轻微功能缺陷或性能缓慢（例如：搜索 P95 延迟超过 1500ms，但未触发 P1 告警）。 | 用户体验降级。 | 4 小时内开始调查。 | N/A |
| **P3 (低)** | 界面小错误、日志警告、技术债务。 | 无明显业务影响。 | 纳入下一次迭代规划。 | N/A |

## **2\. 故障响应流程（Incident Response Flow）**

### **2.1 基础流程**

1. **发现：** 监控系统自动告警 / 用户反馈 / 运维巡检发现。  
2. **分级与通知：** 根据 1.0 章节判断级别，并立即通知对应负责人（参阅值班表）。  
3. **定位与隔离：** 负责人确认问题源头（前端、后端、数据库文件），必要时启用**业务降级开关**（例如：禁用语义搜索，只启用 BM25 关键词搜索）。  
4. **修复与验证：** 应用修复方案，并在 Staging 环境进行冒烟测试，确保问题解决。  
5. **总结与文档化：** 记录事件处理过程、根本原因分析 (RCA)，并更新 SOP 或技术债务清单。

### **2.2 外部依赖故障处理 (第三方服务)**

| 依赖方/服务 | 关键 SLA 摘要 | 应急联系方式 | 替代/降级方案 |
| :---- | :---- | :---- | :---- |
| **Steam API** |  |  | 若 API 不可用，使用**缓存数据**或显示**服务降级公告**。 |
| **Render 平台** |  |  | 若平台宕机，**无替代方案**（初创期限制）。 |

## **3\. 安全事件响应流程**

### **3.1 安全事件分级与响应**

* **数据泄露：** 视为 P0 级。必须立即隔离受影响的组件，通知团队和高层，并准备用户沟通模板。  
* **DDoS 攻击：** 视为 P1 级。立即联系 Render 平台支持，应用 CDN 或 WAF 规则（如果可用）。  
* **权限滥用：** 视为 P2 级。立即禁用相关账户或接口，进行日志审计。

### **3.2 定期安全审计清单**

* **每月：** 检查所有 API 端点是否存在**未经授权的访问**（FastAPI/Pydantic 验证）。  
* **每季度：** 审计所有外部依赖库版本，更新有安全漏洞的库。

## **4\. 知识交接与维护**

### **4.1 知识库维护规范**

* **文档化要求：** 所有新的**架构决策**、**关键部署脚本**、**复杂业务逻辑**必须以 Markdown 格式记录在 GitHub 知识库中。  
* **显性知识要求：** 针对 P0/P1 故障的**关键诊断步骤**和**恢复操作**必须有**录屏或详细图文步骤**。

### **4.2 交接检查清单 (新成员/角色变动)**

| 检查项 | 状态 (Y/N) | 负责人 |
| :---- | :---- | :---- |
| 具备所有环境访问权限（Render/GitHub）。 |  |  |
| 完成故障响应 SOP 和安全响应 SOP 阅读。 |  |  |
| 能够成功在本地运行项目并触发一次 CI/CD 流程。 |  |  |

